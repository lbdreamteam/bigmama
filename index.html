<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>Javascript Phaser App</title>   
</head>
<body onload="digestURL()">

    <!--Funzione per leggere i parametri passati da URL-->
    <script type="text/javascript">
        var URL_params = {},
        digestURL = function () {
            var s_params = location.search.split('&');
            s_params[0] = s_params[0].substring(1);
            for (var i in s_params) {
                var tmp = s_params[i].split('=');
                URL_params[tmp[0]] = tmp[1];
            }
            var out = '';
            for (var i in URL_params) {
                out += 'param: ' + i + ' value: ' + URL_params[i] + '\n';
            }
            return out;
        };
        //URL_params = digestURL();
        //if (URL_params['token']) {
        //    var xmlHttp = new XMLHttpRequest(),
        //        url = 'http://localhost:8081/LBApi/authorize';
        //    xmlHttp.onreadystatechange = function () {
        //        if (xmlHttp.readyState == 4 && xmlHttp.status == 200) {
        //            var res = JSON.parse(xmlHttp.responseText);
        //            if (!res.message) window.close()
        //            else {
        //                url = 'http://localhost:8081/LBApi/authorize'
        //            }
        //        } else window.close();
        //    };
        //    xmlHttp.open('POST', url, false); //richiede l'autenticazione del token
        //    xmlHttp.setRequestHeader('Content-Type', 'application/x-www-form-urlencoded');
        //    xmlHttp.send('token=' + URL_params['token']);
        //} else window.close();
    </script>

    <!--Elenco degli script da importare-->
    <script src="/LB Library/Utility/phaser.js"></script>
    <script src="LB Library/Utility/astar.js"></script>

    <script src="LB Library/Engine/ComponentsSystem/LBSignal.js"></script>
    <script src="LB Library/Engine/ComponentsSystem/LBComponentsManager.js"></script>

    <!--Componenti-->	
	<script src="LB Library/Engine/ComponentsSystem/LBGame components/LBPixelPerfectCollisionComponent.js"></script>
	<script src="LB Library/Engine/ComponentsSystem/LBGame components/LBDepthComponent.js"></script>
    <script src="LB Library/Engine/ComponentsSystem/LBBaseComponent.js"></script>
    <script src="LB Library/Engine/ComponentsSystem/Entity components/LBMovementComponent.js"></script>
    <script src="LB Library/Engine/ComponentsSystem/Entity components/LBKeyboardInputComponent.js"></script>
    <script src="LB Library/Engine/ComponentsSystem/Entity components/LBSnappingComponent.js"></script>
    <script src="LB Library/Engine/ComponentsSystem/Entity components/LBCollidingMovementComponent.js"></script>
	<script src="LB Library/Engine/ComponentsSystem/Entity components/LBOverlapComponent.js"></script>
	<script src="LB Library/Engine/ComponentsSystem/Entity components/LBShootableComponent.js"></script>
    <script src="LB Library/Engine/ComponentsSystem/Entity components/LBShootingComponent.js"></script>
    <script src="LB Library/Engine/ComponentsSystem/Entity components/LBPathFindingComponent.js"></script>

    <!--UI-->

    <script src="/LB Library/UI/LBFont.js"></script>
    <script src="/LB Library/UI/LBText.js"></script>

    <!--Utility Scripts-->
    <script src="/eureca.js"></script>
    <script src="/LB Library/Engine/LBGlobalVariables.js"></script>
    <script src="/LB Library/Engine/Connections/LBOtherPlayerWorkerModule.js"></script>
    <script src="/LB Library/Engine/Connections/LBOtherPlayersManager.js"></script>
    <script src="LB Library/Utility/Elements/LBPrivateHandlers.js"></script>
    <script src="/LB Library/Engine/LBGame.js"></script>
    
    <!--Nuovo core-->
    <script src="LB Library/Engine/LBSprite.js"></script>
    <script src="LB Library/Entities/LBPlayer.js"></script>
    <script src="LB Library/Engine/WeaponsSystem/LBWeapon.js"></script>
    <script src="LB Library/Entities/LBOtherPlayer.js"></script>

	<script src="LB Library/Entities/LBTestingTree.js"></script>
	<script src="LB Library/Entities/LBBullet.js"></script>


    <script src="LB Library/Entities/LBBaseAI.js"></script>
    
    <script src="LB Library/Utility/Elements/LBHashTable.js"></script>
    <script src="LB Library/Engine/LBState.js"></script>
    <script src="src/GameState.js"></script>

    <!--Questo import deve essere ultimo-->
    <script src="src/main.js"></script>


    <div id="content"></div>
</body>
</html>
